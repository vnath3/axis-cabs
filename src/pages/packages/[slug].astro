---
import '../../styles/globals.css';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import Hero from '@/components/Hero.astro';
import LeadForm from '@/components/LeadForm.astro';
import { packages } from '@/data/packages';
import pricing from '@/data/pricing.json';
import Analytics from '@/components/Analytics.astro';
import JsonLd from '@/components/JsonLd.astro';
const url = `https://axis-cabs.netlify.app/packages/${slug}`;
const crumbs = [
  { name: "Home", url: "https://axis-cabs.netlify.app/" },
  { name: "Packages", url: "https://axis-cabs.netlify.app/" },
  { name: entry.title, url }
];

// REQUIRED for dynamic static pages:
export async function getStaticPaths() {
  return packages.map((p) => ({ params: { slug: p.slug } }));
}

const { slug } = Astro.params;
const entry = packages.find((p) => p.slug === slug);
if (!entry) return Astro.redirect('/');
const band = pricing.packages?.[slug!];
---
<html lang="en">
   <head>
     <meta charset="utf-8" />
        <JsonLd data={{
           "@context":"https://schema.org",
           "@type":"BreadcrumbList",
           "itemListElement": crumbs.map((c, i) => ({
             "@type":"ListItem", "position": i+1, "name": c.name, "item": c.url
           }))
         }} />
     <Analytics />
   </head>
  <body>
    <Header />
    <Hero title={entry.title} sub={entry.summary} />
    <main class="mx-auto max-w-6xl px-4 grid md:grid-cols-3 gap-8">
      <div class="md:col-span-2">
        <section class="card">
          <h2 class="text-xl font-bold">Price Bands</h2>
          <p class="opacity-80 mt-2">
            Sedan ₹{band?.sedan_band?.[0] ?? '—'}–₹{band?.sedan_band?.[1] ?? '—'}
            • SUV ₹{band?.suv_band?.[0] ?? '—'}–₹{band?.suv_band?.[1] ?? '—'}
          </p>
          <p class="text-sm mt-1 opacity-70">Inclusions: AC cab, fuel, driver allowance. Exclusions: entry tickets, meals, hotel.</p>
        </section>
        <section class="mt-6"><h3 class="text-lg font-bold mb-3">Get Your Quote</h3><LeadForm /></section>
      </div>
      <aside class="space-y-4">
        <div class="card"><strong>Why Axis Cabs?</strong><p class="text-sm mt-2 opacity-80">Local expertise • Flexible timing • Premium support</p></div>
      </aside>
    </main>
    <Footer />
  </body>
</html>