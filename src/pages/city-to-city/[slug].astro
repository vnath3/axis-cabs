---
import '../../styles/globals.css';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import Hero from '@/components/Hero.astro';
import LeadForm from '@/components/LeadForm.astro';
import FAQ from '@/components/FAQ.astro';
import { routes } from '@/data/routes';
import pricing from '@/data/pricing.json';
import Analytics from '@/components/Analytics.astro';

// REQUIRED for dynamic static pages:
export async function getStaticPaths() {
  return routes.map((r) => ({ params: { slug: r.slug } }));
}

const { slug } = Astro.params;
const entry = routes.find((r) => r.slug === slug);
if (!entry) return Astro.redirect('/');
const price = pricing.routes?.[slug!];
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    ...
    <Analytics />
  </head>

  <body>
    <Header />
    <Hero title={entry.title} sub={entry.summary} />
    <main class="mx-auto max-w-6xl px-4 grid md:grid-cols-3 gap-8">
      <div class="md:col-span-2">
        <section class="card">
          <h2 class="text-xl font-bold">Transparent Price Bands</h2>
          <p class="opacity-80 mt-2">
            Sedan from ₹{price?.sedan_from ?? '—'} • SUV from ₹{price?.suv_from ?? '—'} (tolls extra)
          </p>
          {entry.distanceHint && <p class="text-sm mt-1 opacity-70">Approx: {entry.distanceHint}</p>}
        </section>
        <section class="mt-6"><h3 class="text-lg font-bold mb-3">Get Your Quote</h3><LeadForm /></section>
        <section class="mt-6"><h3 class="text-lg font-bold mb-3">FAQs</h3><FAQ items={entry.faqs} /></section>
      </div>
      <aside class="space-y-4">
        <div class="card"><strong>Why Axis Cabs?</strong><p class="text-sm mt-2 opacity-80">On‑time guarantee • Clean cars • Professional drivers • GST invoice</p></div>
      </aside>
    </main>
    <Footer />
  </body>
</html>